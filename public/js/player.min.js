function renderPlayer(){document.getElementById("player").innerHTML=document.getElementById("player-template").innerText,document.getElementById("player-track-list-container").innerHTML='<ol id="player-track-list" class="list-menu">'+document.getElementById("track-list").innerHTML+"</ol>",document.getElementById("track-list").style.display="none"}function initPlayer(){function a(a,b){document.getElementById("current_track").innerText=a.innerText+" - "+window.bookTitle;for(var c=0;c<g.length;c++)g[c].className=g[c].className.replace("active",""),g[c].parentNode.className=g[c].parentNode.className.replace("active","");a.className+=" active",a.parentNode.className+=" active",f.src=a.getAttribute("href"),f.play(),b&&b()}function b(){var b=document.querySelector("#player-track-list .track.active").getAttribute("id").replace("track_","")-1;!b<=0?a(document.querySelectorAll("#player-track-list .track")[b-1]):f.currentTime=0}function c(){var b=document.querySelector("#player-track-list .track.active").getAttribute("id").replace("track_","")-1;b+1<=g.length-1?a(document.querySelectorAll("#player-track-list .track")[b+1]):f.currentTime=0}function d(){for(var d=0;d<g.length;d++)g[d].onclick=function(b){a(this),b.preventDefault?b.preventDefault():b.returnValue=!1};document.getElementById("toggle-button").onclick=function(){null!=document.querySelector(".player.player-open")?(document.querySelector(".player").className="player animated",document.getElementById("toggle-button").innerHTML="&#9650; Tracks &#9650;"):(document.querySelector(".player").className="player animated player-open",document.getElementById("toggle-button").innerHTML="&#9660; Tracks &#9660;")},document.getElementById("playpause").onclick=function(){f.paused?f.play():f.pause()},document.getElementById("stop").onclick=function(){f.pause(),f.currentTime=0},document.getElementById("rewind").onclick=function(){f.currentTime-=15},document.getElementById("fastforward").onclick=function(){f.currentTime+=15},document.getElementById("previous").onclick=b,document.getElementById("next").onclick=c}function e(){var a=Math.round(f.currentTime/60*100)/100,b=Math.round(f.duration/60*100)/100,c=a/b*100;try{var d=(Math.round(f.currentTime/60*100)/100).toString().split("."),e="";e+=d[0].length<2?"0"+d[0]:d[0],e+=":",e+=d[1].length<2?d[1]+"0":d[1];var g=(Math.round(f.duration/60*100)/100).toString().split("."),h="";h+=g[0].length<2?"0"+g[0]:g[0],h+=":",h+=g[1].length<2?g[1]+"0":g[1],document.getElementById("current_time").innerText=e,document.getElementById("duration").innerText=h,document.querySelector("#slider .progress").style.width=c+"%"}catch(a){}f.paused?document.getElementById("playpause").className="play":document.getElementById("playpause").className=""}if(window.HTMLAudioElement)try{renderPlayer();var f=document.createElement("AUDIO"),g=document.querySelectorAll("#player-track-list .track"),h={hasMP3Support:"probably"==f.canPlayType("audio/mpeg")||"maybe"==f.canPlayType("audio/mpeg"),hasOGGSupport:"probably"==f.canPlayType("audio/ogg")||"maybe"==f.canPlayType("audio/ogg")};h.hasMP3Support&&a(g[0],function(){f.addEventListener("ended",function(){c()})}),d(),setInterval(function(){e()},100)}catch(a){window.console&&console.error("Error:"+a)}}window.onload=function(){renderPlayer(),initPlayer()};
//# sourceMappingURL=player.min.js.map