function gid(a){return document.getElementById(a)}function qs(a){return document.querySelector(a)}function qsa(a){return document.querySelectorAll(a)}function renderPlayer(){var a=gid("track-list").innerHTML;gid("player-track-list-container").innerHTML='<ol id="player-track-list" class="list-menu">'+a+"</ol>",gid("track-list").style.display="none";var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href","/css/player.min.css"),document.getElementsByTagName("head")[0].appendChild(b)}function initPlayer(){function a(a,b){gid("current_track").innerHTML=a.innerText+" - "+window.bookTitle;for(var c=0;c<g.length;c++)g[c].className=g[c].className.replace("active",""),g[c].parentNode.className=g[c].parentNode.className.replace("active","");a.className+=" active",a.parentNode.className+=" active",f.src=a.getAttribute("href"),f.play(),b&&b()}function b(){var b=qs("#player-track-list .track.active").getAttribute("id").replace("track_","")-1;!b<=0?a(qsa("#player-track-list .track")[b-1]):f.currentTime=0}function c(){var b=qs("#player-track-list .track.active").getAttribute("id").replace("track_","")-1;b+1<=g.length-1?a(qsa("#player-track-list .track")[b+1]):f.currentTime=0}function d(){for(var d=0;d<g.length;d++)g[d].onclick=function(b){a(this),b.preventDefault?b.preventDefault():b.returnValue=!1};gid("toggle-button").onclick=function(){null!=qs(".player.player-open")?(qs(".player").className="player animated",gid("toggle-button").innerHTML="&#9650; Tracks &#9650;"):(qs(".player").className="player animated player-open",gid("toggle-button").innerHTML="&#9660; Tracks &#9660;")},gid("playpause").onclick=function(){f.paused?f.play():f.pause()},gid("stop").onclick=function(){f.pause(),f.currentTime=0},gid("rewind").onclick=function(){f.currentTime-=15},gid("fastforward").onclick=function(){f.currentTime+=15},gid("previous").onclick=b,gid("next").onclick=c}function e(){var a=Math.round(f.currentTime/60*100)/100,b=Math.round(f.duration/60*100)/100,c=a/b*100;try{var d=(Math.round(f.currentTime/60*100)/100).toString().split("."),e="";e+=d[0].length<2?"0"+d[0]:d[0],e+=":",e+=d[1].length<2?d[1]+"0":d[1];var g=(Math.round(f.duration/60*100)/100).toString().split("."),h="";h+=g[0].length<2?"0"+g[0]:g[0],h+=":",h+=g[1].length<2?g[1]+"0":g[1],gid("current_time").innerHTML=e,gid("duration").innerHTML=h,qs("#slider .progress").style.width=c+"%"}catch(a){}f.paused?gid("playpause").className="play":gid("playpause").className=""}if(window.HTMLAudioElement)try{renderPlayer();var f=document.createElement("AUDIO"),g=qsa("#player-track-list .track"),h={hasMP3Support:"probably"==f.canPlayType("audio/mpeg")||"maybe"==f.canPlayType("audio/mpeg"),hasOGGSupport:"probably"==f.canPlayType("audio/ogg")||"maybe"==f.canPlayType("audio/ogg")};h.hasMP3Support&&a(g[0],function(){f.addEventListener("ended",function(){c()})}),d(),setInterval(function(){e()},100)}catch(a){window.console&&console.error("Error:"+a)}}window.onload=function(){renderPlayer(),initPlayer()};
//# sourceMappingURL=player.min.js.map